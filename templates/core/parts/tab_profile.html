<section id="tab-profile" class="tab-section px-4 py-4 hidden">

  <!-- タイトル行 -->
  <div class="flex items-center justify-between">
    <button type="button" class="p-2 rounded-full hover:bg-slate-100/10" onclick="alert('設定はこれから実装');">
      <span class="material-symbols-outlined">settings</span>
    </button>
    <div class="text-base font-bold">プロフィール</div>
    <button type="button" class="p-2 rounded-full hover:bg-slate-100/10" onclick="alert('共有はこれから実装');">
      <span class="material-symbols-outlined">share</span>
    </button>
  </div>

  <!-- アイコン＋名前 -->
  <div class="mt-4 flex flex-col items-center text-center">
    <div class="size-24 rounded-full overflow-hidden ring-4 ring-primary/20 bg-slate-200 dark:bg-slate-800">
      {% if profile and profile.avatar %}
        <img src="{{ profile.avatar.url }}" class="w-full h-full object-cover" alt="avatar"/>
      {% else %}
        <div class="w-full h-full flex items-center justify-center text-slate-400">
          <span class="material-symbols-outlined" style="font-size:44px;">person</span>
        </div>
      {% endif %}
    </div>

    <div class="mt-3 text-2xl font-extrabold inline-flex items-center gap-2">
      {{ profile.display_name|default:"山田 太郎" }}
      <span class="inline-flex items-center justify-center size-5 rounded-full bg-primary/20 text-primary">
        <span class="material-symbols-outlined" style="font-size:16px;">verified</span>
      </span>
    </div>

    <div class="mt-1 text-sm text-slate-300">
      {{ profile.school_year|default:"〇〇大学 3年生" }}
    </div>
    <div class="text-sm text-slate-300">
      {{ profile.role|default:"テニスクラブ 代表者" }}
    </div>

    <div class="mt-4 grid grid-cols-2 gap-3 w-full">
      <button type="button" class="rounded-xl bg-slate-700/40 border border-slate-600/40 py-3 font-bold"
        onclick="alert('プロフィール編集はこれから実装');">
        プロフィールを編集
      </button>
      <button type="button" class="rounded-xl bg-primary text-background-dark py-3 font-bold"
        onclick="alert('サークル管理はこれから実装');">
        サークル管理
      </button>
    </div>

    <p class="mt-4 text-sm text-slate-200 leading-relaxed">
      {{ profile.bio|default:"新歓サークル「テニスクラブ」の代表をしています。趣味はカフェ巡りとスポーツです！初心者大歓迎なので、興味がある方はぜひメッセージください。" }}
    </p>
  </div>

  <!-- stats -->
  <div class="mt-5 grid grid-cols-3 gap-3">
    <div class="rounded-2xl border border-slate-700/50 bg-slate-900/20 p-3 text-center">
      <div class="text-2xl font-extrabold">{{ my_posts|length|default:"3" }}</div>
      <div class="text-[11px] text-slate-400">投稿済み</div>
    </div>
    <div class="rounded-2xl border border-slate-700/50 bg-slate-900/20 p-3 text-center">
      <div class="text-2xl font-extrabold">{{ saved_posts|length|default:"12" }}</div>
      <div class="text-[11px] text-slate-400">お気に入り</div>
    </div>
    <div class="rounded-2xl border border-slate-700/50 bg-slate-900/20 p-3 text-center">
      <div class="text-2xl font-extrabold">{{ stats_msgs|default:"45" }}</div>
      <div class="text-[11px] text-slate-400">メッセージ</div>
    </div>
  </div>

  <!-- tabs -->
  <div class="mt-4 grid grid-cols-2 gap-3">
    <button type="button" class="rounded-xl bg-slate-700/30 border border-slate-600/30 py-3 font-bold"
      onclick="alert('過去の投稿はこれから実装');">
      過去の投稿
    </button>
    <button type="button" class="rounded-xl bg-slate-700/30 border border-slate-600/30 py-3 font-bold"
      onclick="alert('保存済みはこれから実装');">
      保存済み
    </button>
  </div>

  <!-- list -->
  <div class="mt-4 grid gap-3">
    {% for p in my_posts_preview %}
      <button type="button" class="w-full text-left rounded-2xl bg-surface-dark border border-slate-700/40 p-4 hover:opacity-95" onclick="openPostModal({{ p.id }})">
        <div class="flex items-center gap-3">
          <div class="w-16 h-12 rounded-xl overflow-hidden bg-slate-800"></div>
          <div class="flex-1">
            <div class="text-xs text-primary font-bold">{{ p.effective_status|default:"募集中" }}</div>
            <div class="text-sm font-bold line-clamp-1">{{ p.title }}</div>
            <div class="text-xs text-slate-400">{{ p.created_at|date:"Y/m/d" }} 投稿</div>
          </div>
          <span class="material-symbols-outlined text-slate-400">chevron_right</span>
        </div>
      </button>
    {% empty %}
      <button type="button" class="w-full text-left rounded-2xl bg-surface-dark border border-slate-700/40 p-4 hover:opacity-95" onclick="alert('ここは後で投稿一覧にする');">
        <div class="flex items-center gap-3">
          <div class="w-16 h-12 rounded-xl overflow-hidden bg-slate-800"></div>
          <div class="flex-1">
            <div class="text-xs text-primary font-bold">募集中</div>
            <div class="text-sm font-bold line-clamp-1">春の新歓テニス体験会！</div>
            <div class="text-xs text-slate-400">2024/04/15 投稿</div>
          </div>
          <span class="material-symbols-outlined text-slate-400">chevron_right</span>
        </div>
      </button>

      <button type="button" class="w-full text-left rounded-2xl bg-surface-dark border border-slate-700/40 p-4 hover:opacity-95" onclick="alert('ここは後で投稿一覧にする');">
        <div class="flex items-center gap-3">
          <div class="w-16 h-12 rounded-xl overflow-hidden bg-slate-800"></div>
          <div class="flex-1">
            <div class="text-xs text-slate-400 font-bold">終了</div>
            <div class="text-sm font-bold line-clamp-1">第1回 カフェ交流会 at 渋谷</div>
            <div class="text-xs text-slate-400">2024/03/20 投稿</div>
          </div>
          <span class="material-symbols-outlined text-slate-400">chevron_right</span>
        </div>
      </button>
    {% endfor %}
  </div>

  <!-- footer -->
  <div class="mt-6 flex items-center justify-between text-slate-400">
    <button type="button" class="inline-flex items-center gap-2" onclick="alert('ヘルプはこれから');">
      <span class="material-symbols-outlined">help</span>
      <span class="text-sm font-bold">ヘルプとサポート</span>
    </button>
    <button type="button" class="p-2 rounded-full hover:bg-slate-100/10" onclick="alert('外部リンクはこれから');">
      <span class="material-symbols-outlined">open_in_new</span>
    </button>
  </div>

  <button type="button" class="mt-4 w-full text-left text-red-400 font-extrabold inline-flex items-center gap-2"
    onclick="alert('ログイン機能は一旦オフなのでログアウトも未実装');">
    <span class="material-symbols-outlined">logout</span>
    ログアウト
  </button>
</section>
